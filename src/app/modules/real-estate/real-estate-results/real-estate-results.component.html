<div *ngIf="this.$sortedApartments | async as apartments">
  <div class="sort-container">
    <div class="sort-btn" (click)="SortDropdownOpen()">
      <div>
        <i #sortDropdown class="material-icons">keyboard_arrow_down</i>
        <span class="result">מיון לפי</span
        ><span class="date"> {{ this.sortTypeChosen }} </span>
      </div>
      @if(this.isSortDropdownOpen){
      <div class="sort-dropdown">
        <div class="sort-option" id="date" (click)="sortResults('תאריך')">
          <span>
            @if(this.sortTypeChecked[0]){
            <img
              class="svg-icon"
              src="assets/images/check-orange.svg"
              alt="check"
            />
            }
          </span>
          <span>תאריך</span>
        </div>
        <div
          id="price-asc"
          class="sort-option"
          (click)="sortResults('מחיר - מהזול ליקר')"
        >
          <span>
            @if(this.sortTypeChecked[1]){
            <img
              class="svg-icon"
              src="assets/images/check-orange.svg"
              alt="check"
            />
            }
          </span>
          <span>מחיר - מהזול ליקר</span>
        </div>
        <div
          id="price-desc"
          class="sort-option"
          (click)="sortResults('מחיר - מהיקר לזול')"
        >
          <span>
            @if(this.sortTypeChecked[2]){
            <img
              class="svg-icon"
              src="assets/images/check-orange.svg"
              alt="check"
            />
            }
          </span>
          <span>מחיר - מהיקר לזול</span>
        </div>
        <div
          id="location"
          class="sort-option"
          (click)="sortResults('קרוב אלי')"
        >
          <span>
            @if(this.sortTypeChecked[3]){
            <img
              class="svg-icon"
              src="assets/images/check-orange.svg"
              alt="check"
            />
            }
          </span>

          <span>קרוב אלי</span>
        </div>
      </div>
      }
    </div>

    <div class="result">
      <span style="font-size: 18px">{{ apartments.length }}</span>
      <span> תוצאות </span>
    </div>
  </div>

  <div class="result-list">
    <div
      class="container"
      *ngFor="let advertisement of apartments; let i = index"
    >
      <div
        class="like-button"
        (click)="authSerivce.updateAdvertisementToFavorites(advertisement.id)"
      >
        <mat-icon
          *ngIf="this.isFavorite(advertisement.id)"
          aria-hidden="false"
          aria-label="Example home icon"
          fontIcon="favorite"
          class="like-button-selected"
        ></mat-icon>

        <mat-icon
          [ngClass]="{
            'like-button-red-color': hoverIndex === i
          }"
          *ngIf="!this.isFavorite(advertisement.id)"
          aria-hidden="false"
          aria-label="Example home icon"
          fontIcon="favorite_border"
          (mouseenter)="hoverIndex = i"
          (mouseleave)="hoverIndex = -1"
        ></mat-icon>
      </div>
      <div
        class="advertisement-details"
        routerLink="/advertisement/{{ advertisement.id }}"
      >
        <div class="ad-content-text">
          <div class="title">
            {{ advertisement.street + " " + advertisement.number }}
          </div>

          <div class="list-group-item">
            <ng-container>
              {{ advertisement.assetType }},{{
                " " + advertisement.neighborhood
              }},{{ " " + advertisement.city }}
            </ng-container>
          </div>

          <div class="list-group-item">
            <li>{{ advertisement.rooms }} חדרים •</li>
            <li>קומה {{ advertisement.floor }} •</li>
            <li>{{ advertisement.totalSquareMeters }} מ"ר</li>
          </div>
        </div>

        <div class="last-row">
          <div class="tags">
            <div class="price">₪{{ advertisement.price | number }}</div>

            <!-- <div class="list-tags">
              <li
                *ngFor="
                  let word of advertisementService.getFirstThreeAdvertisementParameters(
                    advertisement
                  )
                "
                class="list-tag"
              >
                {{ word }}
              </li>
            </div> -->
          </div>
        </div>
      </div>
      <div class="image">
        @if(advertisement.pictures[0].url.length > 0){
        <img
          routerLink="/advertisement/{{ advertisement.id }}"
          *ngIf="advertisement.pictures && advertisement.pictures.length > 0"
          [src]="advertisement.pictures[0].url"
          class="card-img"
          alt="Advertisement Image"
        />
        }@else{
        <img
          id="empty-ad-image"
          routerLink="/advertisement/{{ advertisement.id }}"
          src="assets/images/image_placeholder.svg"
          class="card-img"
          alt="Advertisement Image"
        />
        }
      </div>
    </div>
  </div>
</div>
