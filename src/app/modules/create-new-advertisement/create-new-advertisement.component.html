<form [formGroup]="advertisementForm" (ngSubmit)="handleSubmit()">
  <div class="space1"></div>

  <div class="advertisement-selection" id="Selection-1" *ngIf="true">
    <div class="section-title-container">
      {{ this.changeTradeTypeTitle() }} <span class="section-title">1</span>
    </div>

    <div class="asset-type-buttons">
      <button
        class="asset-type"
        type="button"
        (click)="setAdvertisementType('עסקים למכירה')"
        [class.active]="isActive('עסקים למכירה')"
      >
        <div class="part-1">
          <img src="assets/images/4type.JPG" class="type-pic" alt="ad2" />
        </div>
        <div class="btn-text1">עסקים למכירה</div>
        <div class="btn-text2">הייטק, בתי קפה וכו׳</div>
      </button>
      <button
        class="asset-type"
        type="button"
        [class.active]="isActive('נכס מסחרי')"
        (click)="setAdvertisementType('נכס מסחרי')"
      >
        <div class="part-1">
          <img src="assets/images/3type.JPG" class="type-pic" alt="ad2" />
        </div>
        <div class="btn-text1">מסחרי</div>
        <div class="btn-text2">מחסנים, קליניקות, משרדים</div>
      </button>
      <button
        class="asset-type"
        type="button"
        [class.active]="isActive('השכרה')"
        (click)="setAdvertisementType('השכרה')"
      >
        <div class="part-1">
          <img src="assets/images/2type.JPG" class="type-pic" alt="ad2" />
        </div>
        <div class="btn-text1">השכרה</div>
        <div class="btn-text2"></div>
      </button>
      <button
        class="asset-type"
        type="button"
        [class.active]="isActive('מכירה')"
        (click)="setAdvertisementType('מכירה')"
      >
        <div class="part-1">
          <img src="assets/images/1type.JPG" class="type-pic" alt="ad2" />
        </div>
        <div class="btn-text1">מכירה</div>
        <div class="btn-text2"></div>
      </button>
    </div>
  </div>
  <div class="space"></div>
  <div class="close-section" *ngIf="false">
    <div class="section-title-container">
      <span class="section-title">2</span> <span>כתובת הנכס</span>
    </div>
  </div>

  <div class="advertisement-selection" id="Selection-2" *ngIf="true">
    <div>
      <img src="assets/images/recommend.JPG" class="recommend-pic" alt="ad2" />
    </div>
    <div class="section-title-container">
      <span class="section-title">2</span> <span>כתובת הנכס</span>
    </div>
    <div class="Selection-2-content">
      <div class="part1">
        <div>סימנו עבורך את שדות החובה, שלא נפספס פרט חשוב</div>
      </div>
      <div class="space2"></div>
      <div class="input-container">
        <label class="small-text" for="city">ישוב*</label>
        <input
          class="input large"
          id="city"
          [value]="authService.user.getValue()?.city"
          formControlName="city"
          placeholder="  איפה נמצא הנכס?"
        />
      </div>
      <div class="input-container">
        <label class="small-text" for="street">רחוב*</label>
        <input
          class="input large"
          id="street"
          [value]="authService.user.getValue()?.street"
          formControlName="street"
          placeholder="  הכנס שם הרחוב"
        />
        <div class="nano-text">
          לא ניתן יהיה לעדכן את שם הרחוב לאחר פרסום המודעה
        </div>
      </div>

      <div class="orange-small-text">לא מצאת את הרחוב?</div>
      <div class="floor-description">
        <div class="input-container">
          <label class="small-text" for="number">מס׳ בית*</label>
          <input
            class="input medium center"
            id="number"
            [value]="authService.user.getValue()?.houseNumber"
            formControlName="number"
            placeholder="  מספר בית"
          />
        </div>
        <div class="input-container">
          <label class="small-text" for="number">מספר דירה</label>
          <input class="input medium center" placeholder="  מספר דירה" />
        </div>
      </div>
      <div class="floor-description">
        <div class="input-container">
          <label class="small-text" for="floor">קומה*</label>
          <input
            class="input medium center-placeholder"
            id="floor"
            formControlName="floor"
            placeholder="מספר קומה"
          />
        </div>

        <div class="input-container">
          <label class="small-text" for="totalFloors">סה״כ קומות בבניין*</label>
          <input
            class="input medium center-placeholder"
            id="totalFloors"
            formControlName="totalFloors"
            placeholder="סה״כ קומות "
          />
        </div>
        <div class="check-input">
          <input class="input" type="checkbox" formControlName="onPillars" />
          <label> על עמודים </label>
        </div>
      </div>

      <div class="input-container">
        <label class="small-text light-grey-text" for="neighborhood"
          >שכונה</label
        >
        <input
          class="input large not-allowed"
          id="neighborhood"
          formControlName="neighborhood"
        />
        <div class="nano-gray-text">
          המידע הזה מגיע מגוף ממשלתי ולא ניתן לשינוי
        </div>
      </div>
      <div class="input-container">
        <label class="small-text light-grey-text" for="area">אזור</label>
        <input
          class="input large not-allowed"
          id="area"
          formControlName="area"
        />
        <div class="nano-gray-text">
          המידע הזה מגיע מגוף ממשלתי ולא ניתן לשינוי
        </div>
      </div>

      <div class="line"></div>

      <div class="input-container">
        <label class="small-text" for="assetType">סוג הנכס*</label>
        <button
          class="input large dropdown-btn"
          type="button"
          (click)="toggleDropdown('assetType')"
        >
          {{ asset_type ?? "דירה או אולי פנטהאוז?" }}
          <i #dropdownIconAsset_type class="material-icons"
            >keyboard_arrow_down</i
          >
        </button>
        <ul *ngIf="this.isAssetTypeDropdownHidden" class="dropdown-menu asset">
          <li
            class="dropdown-item"
            *ngFor="let option of assetTypes"
            (click)="selectOption(option, 'assetType')"
          >
            {{ option }}
          </li>
        </ul>
      </div>

      <div class="input-container">
        <label class="small-text" for="assetState">מצב הנכס*</label>
        <button
          class="input large dropdown-btn"
          type="button"
          (click)="toggleDropdown('assetState')"
        >
          {{ asset_State ?? "משופץ? חדש מקבלן" }}
          <i #dropdownIconAsset_State class="material-icons"
            >keyboard_arrow_down</i
          >
        </button>
        <ul
          *ngIf="this.isAssetAssetstateDropdownHidden"
          class="dropdown-menu asset dropdown-assetState"
        >
          <li
            class="dropdown-item assetState"
            *ngFor="let option of assetConditions"
            (click)="selectOption(option, 'assetState')"
          >
            {{ option }}
          </li>
        </ul>
      </div>

      <div class="input-container">
        <label class="small-text" for="view">כיווני אוויר</label>
        <div class="Select-options">
          <div
            *ngFor="let number of AirDirections; let i = index"
            [ngClass]="optionClass(i, false)"
            [class.selected]="
              advertisementForm.get('airDirections').value === number
            "
            (click)="selectAirDirections(number)"
          >
            {{ number }}
          </div>
        </div>
      </div>

      <div class="input-container">
        <label class="small-text" for="view"> נוף פתוח</label>
        <div class="Select-options">
          <div
            *ngFor="let view of viewOptions; let i = index"
            [ngClass]="optionClass(i, false)"
            [class.selected]="advertisementForm.get('view').value === view"
            (click)="selectAirView(view)"
          >
            {{ view }}
          </div>
        </div>
      </div>
      <label class="checkbox-input">
        <input class="input" type="checkbox" formControlName="rearProperty" />
        נכס עורפי
      </label>

      <div class="line line2"></div>

      <div>
        <label class="checkbox-input">
          <input type="checkbox" />
          אני רוצה לקבל עדכון חודשי במייל עם הערכת שווי מעודכנת עבור הנכס,
          עסקאות באיזור והצעות מקצועיות מיועצי נדל״ן
        </label>
      </div>

      <div class="stages">
        <img src="assets/images/stages.JPG" class="stages-pic" alt="stages" />
      </div>

      <div class="navigation-btn">
        <button class="continue-btn">המשך לשלב הבא</button>
        <button class="return-btn">חזרה</button>
      </div>
    </div>
  </div>

  <div class="space"></div>

  <div class="close-section" *ngIf="false">
    <div><span class="section-title">3</span> <span> מאפייני הנכס</span></div>
  </div>

  <div class="space"></div>
  <div class="close-section" *ngIf="false">
    <div class="section-title-container">
      <span class="section-title">3</span> <span> מאפייני הנכס</span>
    </div>
  </div>

  <div class="advertisement-selection" id="Selection-3" *ngIf="true">
    <div>
      <img
        src="assets/images/upgrade-add.JPG"
        class="upgrade-add-pic"
        alt="ad2"
      />
      <div class="Selection-3-content">
        <div id="section-title-container3" class="section-title-container">
          <span class="section-title">3</span> <span> מאפייני הנכס</span>
        </div>
        <div class="input-container">
          <label class="small-text" for="rooms">מספר חדרים*</label>
          <button
            class="input large dropdown-btn"
            type="button"
            (click)="toggleDropdown('rooms')"
          >
            {{ asset_Rooms ?? "בחירת מספר חדרים" }}
            <i #dropdownIconRooms class="material-icons">keyboard_arrow_down</i>
          </button>
          <ul
            *ngIf="this.isRoomsDropdownHidden"
            class="dropdown-menu asset dropdown-assetState rooms"
          >
            <li
              class="dropdown-item assetState"
              *ngFor="let option of roomsOptions"
              (click)="selectOption(option, 'rooms')"
            >
              {{ option }}
            </li>
          </ul>
        </div>

        <div class="input-container">
          <label class="small-text" for="view"> חדרי מקלחת</label>
          <div class="Select-options">
            <div
              *ngFor="let number of ShowerRooms; let i = index"
              [ngClass]="optionClass(i, false)"
              [class.selected]="
                advertisementForm.get('showerRooms').value === number
              "
              (click)="selectShowerRooms(number)"
            >
              {{ number }}@if(number==4){ {{ "+" }}}
            </div>
          </div>
        </div>

        <div class="input-container">
          <label class="small-text" for="view"> חניה</label>
          <div class="Select-options">
            <div
              *ngFor="let number of privateParking; let i = index"
              [ngClass]="optionClass(i, false)"
              [class.selected]="
                advertisementForm.get('privateParking').value === number
              "
              (click)="selectPrivateParking(number)"
            >
              @if(number==0){ {{ "ללא" }}} @else{{{ number }}}
            </div>
          </div>
        </div>

        <div class="input-container">
          <label class="small-text" for="view"> מרפסת</label>
          <div class="Select-options">
            <div
              id="balconiesNumber"
              *ngFor="let number of balconiesNumber; let i = index"
              [ngClass]="optionClass(i, true)"
              [class.selected]="
                advertisementForm.get('balconiesNumber').value === number
              "
              (click)="selectBalconiesNumber(number)"
            >
              @if(number==0){ {{ "ללא" }}} @else{{{ number }}}
            </div>
          </div>
        </div>
        <div class="line3"></div>
        <div class="sub-title">מאפייני הנכס</div>

        <div class="property-Features">
          <div
            class="Feature"
            *ngFor="let item of propertyFeatures; let i = index"
            (click)="selectPropertyFeatures(i)"
            [class.selected1]="
              advertisementForm.get(propertyFeaturesChecked[i].key).value ===
              true
            "
          >
            @if(propertyFeaturesIcons[i]!='false'){

            <i class="material-icons feature-pic">{{
              propertyFeaturesIcons[i]
            }}</i>
            } @else{<img
              [src]="'assets/images/' + propertyFeaturesImages[i] + '.svg'"
              class="feature-pic"
              alt="feature"
            />}
            {{ item }}
          </div>
        </div>
        <div class="property-description">
          <div class="sub-title font-17">מה חשוב לך שידעו על הנכס?</div>

          <div class="description-box" *ngIf="furnitureDescription">
            <div class="description-title description-box">
              <label class="small-text" for="">
                פרוט הריהוט: (עד 200 תוים)
              </label>
              <div class="content-chars">
                {{
                  advertisementForm.get("furnituredescription").value.length ||
                    0
                }}/200
              </div>
            </div>

            <textarea
              id="furnituredescription"
              #furnituredescription
              (input)="updatefurnitureDescription(furnituredescription.value)"
              formControlName="furnituredescription"
            ></textarea>
          </div>
          <div class="description-box">
            <label class="small-text" for="description">פרוט הנכס</label>

            <div class="description-title description-box">
              <label
                class="input-label"
                [ngStyle]="{
                  color: changeColor(
                    advertisementForm.get('description').value.length || 0
                  )
                }"
                for="description"
                >{{ descriptionMessage }}
              </label>
              <div class="content-chars">
                {{ advertisementForm.get("description").value.length || 0 }}/400
              </div>
            </div>

            <textarea
              maxlength="400"
              placeholder="זה המקום לתאר את הפרטים הבולטים,למשל,האם נערך שיפוץ במבנה,מה שופץ,כיווני אוויר,האווירה ברחוב וכו'"
              (input)="updateDescription(description.value)"
              #description
              id="description"
              formControlName="description"
            ></textarea>
            <div
              [ngStyle]="{
                'background-color': changeColor(
                  advertisementForm.get('description').value.length || 0
                ),
                width: changeWidth(
                  advertisementForm.get('description').value.length || 0
                ),
                'border-top-left-radius': changeRadius(
                  advertisementForm.get('description').value.length || 0
                )
              }"
              class="process-bar"
            ></div>
          </div>
        </div>
        <div class="nano-text1">
          אין צורך להוסיף מספר טלפון כחלק מהתיאור, בהמשך התהליך יש אזור מסודר
          לזה
        </div>
        <div class="navigation-btn">
          <button class="continue-btn">המשך לשלב הבא</button>
          <button class="return-btn">חזרה</button>
        </div>
      </div>
    </div>
  </div>
  <div class="space"></div>

  <div class="close-section" *ngIf="false">
    <span class="section-title">4</span> <span> תשלומים, תאריכים ועוד</span>
  </div>

  <!-- <div class="advertisement-selection" id="Selection-4" *ngIf="true">
    <div>
      <span class="section-title">4</span> <span> תשלומים, תאריכים ועוד</span>
      <div>
        <label for="price">מספר תשלומים</label>
        <input id="price" formControlName="numberOfPayments" />
      </div>
      <div>
        <label for="price">ועד בית</label>
        <input
          placeholder="תשלום לועד בית"
          id="price"
          formControlName="houseCommitteePayment"
        />
      </div>
      <div>
        <label for="price">ארנונה לחודשים</label>
        <input
          placeholder="  סכום ארנונה לתשלום"
          id="price"
          formControlName="municipalityMonthlyPropertyTax"
        />
      </div>
      <div>
        <label for="price"> מ״ר בנוי</label>
        <input
          placeholder="כמה מר יש בנכס"
          id="price"
          formControlName="builtSquareMeters"
        />
      </div>
      <div>
        <label for="price"> מ״ר גינה</label>
        <input id="price" formControlName="gardenSquareMeters" />
      </div>
      <div>
        <label for="price"> גודל במ״ר סך הכל*</label>
        <input id="price" formControlName="totalSquareMeters" />
      </div>
      <div>
        <label for="price">מחיר*</label>
        <input id="price" formControlName="price" />
      </div>
      <div>
        <label for="price">מחיר למטר</label>
        <div></div>
      </div>

      <div class="title">תאריך כניסה</div>
      <div class="date">
        <input
          id="entryDate"
          formControlName="entryDate"
          class="date-input"
          type="date"
          placeholder="dd/mm/yyyy"
        />
        <label class="date-checkbox">
          <div>
            <input type="checkbox" formControlName="immediate" />כניסה מיידית
          </div>
          <div><input type="checkbox" formControlName="flexible" /> גמיש</div>
          <div>
            <input type="checkbox" formControlName="longTerm" /> לטווח ארוך
          </div>
        </label>
      </div>
    </div>
    <div class="navigation-btn">
      <button class="continue-btn">המשך לשלב הבא</button>
      <button class="return-btn">חזרה</button>
    </div>
  </div> -->

  <div class="advertisement-selection" id="Selection-4" *ngIf="true">
    <div>
      <img src="assets/images/insight.JPG" class="insight-pic" alt="ad2" />
    </div>
    <div class="section-title-container">
      <span class="section-title">4</span> <span>תשלומים, תאריכים ועוד</span>
    </div>
    <div class="Selection-2-content">
      <div class="input-container">
        <label class="small-text" for="numberOfPayments">מספר תשלומים*</label>
        <button
          class="input large dropdown-btn"
          type="button"
          (click)="toggleDropdown('numberOfPayments')"
        >
          <span
            [ngStyle]="{ color: changeColorIfSelected(number_Of_Payments) }"
          >
            {{ number_Of_Payments }}
          </span>

          <i #dropdownIconnumber_Of_Payments_type class="material-icons"
            >keyboard_arrow_down</i
          >
        </button>
        <ul
          *ngIf="this.isNumberOfPaymentsTypeDropdownHidden"
          class="dropdown-menu asset"
        >
          <li
            class="dropdown-item"
            *ngFor="let option of numberOfPayments"
            (click)="selectOption(option, 'numberOfPayments')"
          >
            {{ option }}
          </li>
        </ul>
      </div>
      <div class="input-container">
        <label class="small-text" for="houseCommitteePayment">ועד בית</label>
        <input
          class="input large"
          id="houseCommitteePayment"
          formControlName="houseCommitteePayment"
          placeholder="   תשלום לועד בית"
        />
      </div>

      <div class="input-container">
        <label class="small-text" for="municipalityMonthlyPropertyTax">
          ארנונה לחודשים</label
        >
        <input
          class="input large"
          id="houseCommitteePayment"
          formControlName="municipalityMonthlyPropertyTax"
          placeholder="  סכום הארנונה לתשלום"
        />
      </div>

      <div class="line"></div>

      <div class="input-container">
        <label class="small-text" for="builtSquareMeters"> מ״ר בנוי</label>
        <input
          class="input large left-Placeholder"
          id="builtSquareMeters"
          formControlName="builtSquareMeters"
          placeholder="כמה מר יש בנכס"
        />
      </div>
      <div class="input-container">
        <label class="small-text" for="gardenSquareMeters"> מ״ר גינה </label>
        <input
          class="input large left-Placeholder"
          id="gardenSquareMeters"
          formControlName="gardenSquareMeters"
        />
      </div>

      <div class="input-container">
        <label class="small-text" for="totalSquareMeters">
          גודל במ״ר סך הכל*
        </label>
        <input
          class="input large left-Placeholder"
          id="totalSquareMeters"
          formControlName="totalSquareMeters"
        />
      </div>

      <div class="input-container">
        <label class="small-text" for="price">מחיר</label>
        <div class="price-input" style="position: relative">
          <input
            class="input large left-Placeholder price-input-text"
            id="price"
            formControlName="price"
            placeholder=" סכום מינימלי {{ this.minPrice | number }} "
          />
          <span class="shekel">₪</span>
        </div>
      </div>

      <div class="input-container">
        <label class="small-text" for="price">מחיר למטר</label>
        <div class="price-input" style="position: relative">
          <input
            class="input large left-Placeholder price-input-text"
            id="price"
            [value]="pricePerSquareMeter()"
          />
          <span class="shekel">₪</span>
        </div>
      </div>

      <div class="navigation-btn">
        <button class="continue-btn">המשך לשלב הבא</button>
        <button class="return-btn">חזרה</button>
      </div>
    </div>
  </div>
  <div class="space"></div>

  <div class="close-section" *ngIf="false">
    <span class="section-title">5</span> <span>תמונות וסרטונים </span>
  </div>

  <div class="advertisement-selection" id="Selection-5" *ngIf="true">
    <div>
      <span class="section-title">5</span> <span>תמונות וסרטונים </span>
      <div>
        <label for="pictures">תמונות</label>
        <input type="file" id="pictures" (change)="onFileChange($event)" />
      </div>
      <div>
        <img
          *ngFor="let image of images"
          [src]="src(image)"
          height="100"
          width="100"
        />
      </div>

      <div>
        <label for="video">וידאו</label>
        <input
          id="video"
          type="file"
          formControlName="video"
          (change)="onFileVideoChange($event)"
        />
      </div>
    </div>
    <div class="navigation-btn">
      <button class="continue-btn">המשך לשלב הבא</button>
      <button class="return-btn">חזרה</button>
    </div>
  </div>
  <div class="space"></div>

  <div class="close-section" *ngIf="false">
    <div><span class="section-title">6</span> <span>פרטי התקשרות </span></div>
  </div>

  <div class="advertisement-selection" id="Selection-6" *ngIf="true">
    <div><span class="section-title">6</span> <span>פרטי התקשרות </span></div>
    <div>
      <label for="contactName">שם איש קשר*</label>
      <input
        id="contactName"
        formControlName="contactName"
        [value]="authService.user.getValue()?.name"
      />
    </div>
    <div>
      <label for="contactPhone">טלפון איש קשר*</label>
      <input id="contactPhone" formControlName="contactPhone" />
    </div>
    <input type="checkbox" formControlName="standardizationAccepted" />

    רק לקרוא ולאשר את התקנון*
    <div class="navigation-btn">
      <button class="continue-btn">המשך לשלב הבא</button>
      <button class="return-btn">חזרה</button>
    </div>
  </div>
  <div class="space"></div>

  <div class="close-section" *ngIf="false">
    <div><span class="section-title">7</span> <span> בחירת מסלול</span></div>
  </div>
  <div class="advertisement-selection" id="Selection" *ngIf="true">
    <div><span class="section-title">7</span> <span> בחירת מסלול</span></div>
    <button type="submit">בחירת מסלול</button>
  </div>
</form>
