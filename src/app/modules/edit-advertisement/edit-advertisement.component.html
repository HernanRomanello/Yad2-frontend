<div class="edit-container">
  <div class="space-block">.</div>
  <form
    id="edit-advertisement"
    class="advertisement-selection"
    (ngSubmit)="handleSubmit()"
  >
    <span class="title">עריכת פרטי הנכס </span>
    <div class="edit-inputs">
      <div class="input-container">
        <label class="small-text light-grey-text" for="assetType"
          >סוג הנכס*
        </label>
        <div id="assetType" class="data-input fill-block large light-grey-text">
          {{ advertisement.assetType }}
        </div>
      </div>
      <div class="input-container">
        <label class="small-text" for="number">מס' דירה</label>
        <input
          #HouseNumber
          class="data"
          id=""
          [value]="this.houseNumber"
          (input)="
            this.houseNumber = HouseNumber.value;
            this.isHouseNumberEraseBtnHidden = false
          "
        />
        @if(!this.isHouseNumberEraseBtnHidden){
        <img
          (click)="clearInputValue('houseNumber'); HouseNumber.value = ''"
          class="erase-input-btn"
          src="assets/images/close-sm.svg"
          alt=""
        />
        }
      </div>
      <div class="input-container">
        <label class="small-text" for="number">מצב הנכס*</label>
        <button
          id="assetState"
          class="data large dropdown-btn"
          type="button"
          [ngStyle]="{
            border: this.isAssetAssetstateDropdownHidden
              ? 'solid 1px #cccccc '
              : 'solid 2px #363636 '
          }"
          (click)="
            this.openAndCloseDropdown(
              'assetState',
              this.isAssetAssetstateDropdownHidden
            )
          "
        >
          {{ this.advertisement.assetState }}

          <img class="arrow-down" src="assets/images/arrow-down.svg" alt="" />
        </button>
        <ul
          *ngIf="!this.isAssetAssetstateDropdownHidden"
          class="dropdown-select"
        >
          <li
            class="dropdown-option"
            *ngFor="let option of advertisementService.assetConditions"
            (click)="selectOption(option, 'assetState')"
          >
            {{ option }}
          </li>
        </ul>
      </div>
      <div class="input-container">
        <label class="small-text" for="view">כיווני אוויר</label>
        <div class="Select-options">
          <div
            *ngFor="
              let number of advertisementService.AirDirections;
              let i = index
            "
            [ngClass]="optionClass(i, false)"
            [class.selected3]="advertisement.airDirections === number"
            (click)="selectBtnOption(number, 'airDirections', 'none')"
          >
            {{ number }}
          </div>
        </div>
      </div>

      <div class="input-container">
        <label class="small-text" for="view"> נוף פתוח</label>
        <div class="Select-options">
          <div
            *ngFor="let view of advertisementService.viewOptions; let i = index"
            [ngClass]="optionClass(i, false)"
            [class.selected3]="this.advertisement.view === view"
            (click)="selectBtnOption(0, 'view', view)"
          >
            {{ view }}
          </div>
        </div>
      </div>
      <label class="checkbox-input">
        <input
          class="checkbox"
          type="checkbox"
          #frontProperty
          [checked]="this.advertisement.rearProperty.valueOf()"
          (input)="this.advertisement.rearProperty = frontProperty.checked"
        />
        נכס עורפי
      </label>

      <div class="input-container">
        <label class="small-text light-grey-text" for="city">ישוב* </label>
        <div id="city" class="data-input fill-block large light-grey-text">
          {{ advertisement.city }}
        </div>
      </div>
      <div class="input-container">
        <label class="small-text light-grey-text" for="street">רחוב* </label>
        <div id="street" class="data-input fill-block large light-grey-text">
          {{ advertisement.street }}
        </div>
        <div class="address-info-box address-info">
          המידע הזה מגיע מגוף ממשלתי, אם הרחוב שלך לא מופיע, מומלץ לבחור רחוב
          קרוב אליך
        </div>
      </div>

      <div class="input-container">
        <label class="small-text light-grey-text" for="number">מס' בית* </label>
        <div
          id="number"
          class="data-input fill-block medium-size light-grey-text"
        >
          {{ advertisement.number }}
        </div>
      </div>

      <div class="floor-description">
        <div class="input-container">
          <div class="input-container">
            <label class="small-text light-grey-text" for="floor">קומה*</label>
            <div
              id="floor"
              class="data-input fill-block medium-size light-grey-text large-size"
            >
              {{ advertisement.floor }}
            </div>
          </div>
          <div id="floor-error" class="error-text">שדה חובה</div>
        </div>

        <div class="input-container">
          <label class="small-text" for="totalFloors">סה״כ קומות בבניין*</label>
          <input
            #TotalFloorInput
            class="data medium large-size"
            id="totalFloors"
            formControlName="totalFloors"
            placeholder="הכנסת סה״כ קומות "
            [value]="
              advertisement.totalFloors.toString() === 'NaN' ||
              advertisement.totalFloors === 0
                ? ''
                : advertisement.totalFloors.toString()
            "
            (input)="
              advertisement.totalFloors = removeCommasFromNumberAndParseInt(
                TotalFloorInput.value
              );
              this.isTotalFloorsEraseBtnHidden = false
            "
          />

          @if(!this.isTotalFloorsEraseBtnHidden){
          <img
            (click)="clearInputValue('totalFloors'); TotalFloorInput.value = ''"
            class="erase-btn"
            src="assets/images/close-sm.svg"
            alt=""
          />
          }
          <div id="totalFloors-error" class="error-text">
            זהו שדה חובה - סה"כ קומות בבניין
          </div>
        </div>
        <div class="check-input margin-bottom">
          <input
            #onPillars
            class="checkbox"
            type="checkbox"
            (input)="this.advertisement.onPillars = onPillars.checked"
          />
          <label> על עמודים </label>
        </div>
      </div>

      <div class="input-container">
        <label class="small-text light-grey-text" for="number"
          >מספר חדרים*
        </label>
        <div
          id="number"
          class="data-input fill-block medium-size light-grey-text"
        >
          {{ this.advertisement.rooms }}
        </div>
      </div>

      <div class="input-container">
        <label class="small-text" for="privateParking">חניה</label>
        <div class="Select-options">
          <div
            *ngFor="
              let number of advertisementService.privateParking;
              let i = index
            "
            [ngClass]="[optionClass(i, false), 'small-option']"
            [class.selected3]="advertisement.privateParking === number"
            (click)="selectBtnOption(number, 'privateParking', 'none')"
          >
            @if(number==0){ {{ "ללא" }}} @else{{{ number }}}
          </div>
        </div>
      </div>
      <div class="input-container">
        <label class="small-text" for="balconiesNumber">מרפסת</label>
        <div class="Select-options">
          <div
            *ngFor="
              let number of advertisementService.balconiesNumber;
              let i = index
            "
            [ngClass]="[optionClass(i, false), 'small-option']"
            [class.selected3]="advertisement.balconiesNumber === number"
            (click)="selectBtnOption(number, 'balconiesNumber', 'none')"
          >
            @if(number==0){ {{ "ללא" }}} @else{{{ number }}}
          </div>
        </div>
      </div>

      <div class="sub-title-">מאפייני הנכס</div>

      <div class="property-Features">
        <div
          class="Feature"
          *ngFor="let item of propertyFeatures; let i = index"
          (click)="selectPropertyFeatures(i)"
          [class.selected2]="this.findPropertyFeature(i) === true"
        >
          <img
            id="{{ propertyFeaturesImages[i] }}"
            [src]="'assets/images/' + propertyFeaturesImages[i] + '.svg'"
            class="feature-pic"
            alt="feature"
          />
          <span>
            {{ item }}
          </span>
        </div>
      </div>
      <div class="sub-title-">מה חשוב לך שידעו על הנכס?</div>

      <div class="description-box" *ngIf="advertisement.furnished">
        <div class="text-length-box">
          <label class="small-text" for=""> פרוט הריהוט: (עד 200 תוים) </label>
          <div class="description-title description-box">
            <div class="loading-bar">
              <span class="descriptionMessage">
                {{ this.changeText(advertisement.furnituredescription.length) }}
              </span>
            </div>
            <div
              [ngClass]="
                changeColor(advertisement.furnituredescription.length || 0)
              "
              [ngStyle]="{
                width: changeWidth(
                  advertisement.furnituredescription.length || 0
                ),
                height: changeHieght(
                  advertisement.furnituredescription.length || 0
                )
              }"
            ></div>

            <div class="content-chars">
              {{ advertisement.furnituredescription.length || 0 }}/200
            </div>
          </div>
        </div>
        <div class="textarea">
          @if(!this.isFurnitureDescriptionEraseBtnHidden){
          <img
            (click)="clearInputValue('furnituredescription')"
            class="erase-furnituredescription-btn"
            src="assets/images/close-sm.svg"
            alt=""
          />
          }
          <textarea
            maxlength="200"
            id="furnituredescription"
            #furnitureDescription
            (input)="
              this.advertisement.furnituredescription =
                furnitureDescription.value
            "
            [value]="advertisement.furnituredescription"
          ></textarea>
        </div>
      </div>
      <div class="description-box">
        <div class="text-length-box">
          <label class="small-text" for=""> פרוט הנכס </label>
          <div class="description-title description-box">
            <div class="loading-bar">
              <span class="descriptionMessage">
                {{ this.changeText(advertisement.description.length) }}
              </span>
            </div>
            <div
              [ngClass]="changeColor(advertisement.description.length || 0)"
              [ngStyle]="{
                width: changeWidth(advertisement.description.length || 0),
                height: changeHieght(advertisement.description.length || 0)
              }"
            ></div>

            <div class="content-chars">
              {{ advertisement.description.length || 0 }}/400
            </div>
          </div>
        </div>
        <div class="textarea">
          @if(!this.isDescriptionEraseBtnHidden){
          <img
            (click)="clearInputValue('description')"
            class="erase-furnituredescription-btn"
            src="assets/images/close-sm.svg"
            alt=""
          />
          }
          <textarea
            maxlength="400"
            id="assetDescription"
            #assetDescription
            (input)="this.advertisement.description = assetDescription.value"
            [value]="advertisement.description"
          ></textarea>
        </div>
        <div class="fill-info">
          אין צורך להוסיף מספר טלפון כחלק מהתיאור, בהמשך התהליך יש אזור מסודר
          לזה
        </div>
      </div>
      <div class="input-container">
        <label class="small-text" for="number">מספר תשלומים *</label>
        <button
          id="assetState"
          class="data large dropdown-btn"
          type="button"
          [ngStyle]="{
            border: this.isNumberOfPaymentsDropdownHidden
              ? 'solid 1px #cccccc '
              : 'solid 2px #363636 '
          }"
          (click)="
            this.openAndCloseDropdown(
              'numberOfPayments',
              this.isNumberOfPaymentsDropdownHidden
            )
          "
        >
          {{ this.advertisement.numberOfPayments }}

          <img class="arrow-down" src="assets/images/arrow-down.svg" alt="" />
        </button>
        <ul
          *ngIf="!this.isNumberOfPaymentsDropdownHidden"
          class="dropdown-select"
        >
          <li
            class="dropdown-option payment-option"
            *ngFor="let option of advertisementService.numberOfPayments"
            (click)="selectOption(option, 'numberOfPayments')"
          >
            {{ option }}
          </li>
        </ul>
      </div>
      <div class="input-container">
        <label class="small-text" for="number">ועד בית </label>
        <input
          #houseCommitteePayment
          class="data number-input"
          id="houseCommitteePayment"
          [value]="
            advertisement.houseCommitteePayment.toString() === 'NaN' ||
            advertisement.houseCommitteePayment === 0
              ? ''
              : advertisement.houseCommitteePayment.toString()
          "
          (input)="
            advertisement.houseCommitteePayment =
              removeCommasFromNumberAndParseInt(houseCommitteePayment.value);
            this.isHouseCommitteePaymentEraseBtnHidden = false
          "
        />
        @if(!this.isHouseCommitteePaymentEraseBtnHidden){
        <img
          (click)="
            clearInputValue('houseCommitteePayment');
            houseCommitteePayment.value = ''
          "
          class="erase-input-btn"
          src="assets/images/close-sm.svg"
          alt=""
        />
        }
      </div>
      <div class="input-container">
        <label class="small-text" for="number"> ארנונה לחודשיים </label>
        <input
          #municipalityMonthlyPropertyTax
          class="data number-input"
          id="municipalityMonthlyPropertyTax"
          [value]="
            advertisement.municipalityMonthlyPropertyTax.toString() === 'NaN' ||
            advertisement.municipalityMonthlyPropertyTax === 0
              ? ''
              : advertisement.municipalityMonthlyPropertyTax.toString()
          "
          (input)="
            advertisement.municipalityMonthlyPropertyTax =
              removeCommasFromNumberAndParseInt(
                municipalityMonthlyPropertyTax.value
              );
            this.isMunicipalityMonthlyPropertyTaxEraseBtnHidden = false
          "
        />
        @if(!this.isMunicipalityMonthlyPropertyTaxEraseBtnHidden){
        <img
          (click)="
            clearInputValue('municipalityMonthlyPropertyTax');
            municipalityMonthlyPropertyTax.value = ''
          "
          class="erase-input-btn"
          src="assets/images/close-sm.svg"
          alt=""
        />
        }
      </div>
      <div class="input-container">
        <label class="small-text" for="number"> מ"ר בנוי </label>
        <input
          #builtSquareMeters
          class="data number-input"
          id="builtSquareMeters"
          [value]="
            advertisement.builtSquareMeters.toString() === 'NaN' ||
            advertisement.builtSquareMeters === 0
              ? ''
              : advertisement.builtSquareMeters.toString()
          "
          (input)="
            advertisement.builtSquareMeters = removeCommasFromNumberAndParseInt(
              builtSquareMeters.value
            );
            this.isBuiltSquareMetersEraseBtnHidden = false
          "
        />
        @if(!this.isBuiltSquareMetersEraseBtnHidden){
        <img
          (click)="
            clearInputValue('builtSquareMeters'); builtSquareMeters.value = ''
          "
          class="erase-input-btn medium-input"
          src="assets/images/close-sm.svg"
          alt=""
        />
        }
      </div>
      <div class="input-container">
        <label class="small-text" for="number"> גודל במ"ר סך הכל* </label>
        <input
          #totalSquareMeters
          class="data number-input"
          id="totalSquareMeters"
          [value]="
            advertisement.totalSquareMeters.toString() === 'NaN' ||
            advertisement.totalSquareMeters === 0
              ? ''
              : advertisement.totalSquareMeters.toString()
          "
          (input)="
            advertisement.totalSquareMeters = removeCommasFromNumberAndParseInt(
              totalSquareMeters.value
            );
            this.isTotalSquareMetersEraseBtnHidden = false
          "
        />
        @if(!this.isTotalSquareMetersEraseBtnHidden){
        <img
          (click)="
            clearInputValue('totalSquareMeters'); totalSquareMeters.value = ''
          "
          class="erase-input-btn"
          src="assets/images/close-sm.svg"
          alt=""
        />
        }
      </div>
      <div class="input-container price-box">
        <label class="small-text" for="number"> מחיר </label>
        <input
          #price
          class="data number-input"
          type="text"
          id="price"
          [value]="
            advertisement.price.toString() === 'NaN' ||
            advertisement.price === 0
              ? ''
              : advertisement.price.toString()
          "
          (input)="
            advertisement.price = removeCommasFromNumberAndParseInt(
              price.value
            );
            this.isPriceEraseBtnHidden = false
          "
          placeholder="{{
            advertisement.tradeType === 'השכרה'
              ? 'סכום מינימלי 100'
              : 'סכום מינימלי 10,000'
          }}"
        />
        <div class="currency">&#x20AA;</div>
        @if(!this.isPriceEraseBtnHidden){
        <img
          (click)="clearInputValue('price'); price.value = ''"
          class="erase-input-btn"
          src="assets/images/close-sm.svg"
          alt=""
        />
        }
      </div>
    </div>
  </form>
</div>
